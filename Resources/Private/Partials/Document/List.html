{namespace dpf = EWW\Dpf\ViewHelpers}

<div class="btn-group" role="group">
          <f:link.action action="listNew" controller="Document" class="btn btn-default btn-sm {dpf:activeManagerMenu(controllerName:'Document', actionName:'listNew')}">            
            neu
          </f:link.action>  
          <f:link.action action="listEdit" controller="Document" class="btn btn-default btn-sm {dpf:activeManagerMenu(controllerName:'Document', actionName:'listEdit')}">           
            in Bearbeitung
          </f:link.action>
        </div>    
    
    
<table class="tx_dpf table table-striped table-manager table-condensed" >
  <thead>
    <tr>
    <th class="xcol-md-4"><f:translate key="tx_dpf_domain_model_document.title" /></th>
    <th class="xcol-md-2">Authors</th>
    <th class="xcol-md-2">Published date</th>
    <th class="xcol-md-2">Dataset Identifier</th>  
    <th class="xcol-md-2">Status</th>
    <th class="xcol-md-2"><!-- ACTIONS --></th>
    </tr>
  </thead>
  <f:for each="{documents}" as="document">
     <tr>    
      <td><f:link.action action="edit" controller="DocumentFormBE" arguments="{document : document}">{document.title}</f:link.action></td>
      <td>
        <f:for each="{document.authors}" as="author" iteration="itemIterator"> 
        {author}<f:if condition="{itemIterator.isLast}">
          <f:then></f:then> 
          <f:else>; </f:else>  
        </f:if>
        </f:for>  
      </td>
      <td><f:format.date date="{document.dateIssued}" format="d.m.Y" /></td>
      <td>{document.objectIdentifier}</td>
      <td>{f:if(condition: '{document.isNew}', then: 'neu', else: 'in Bearbeitung')}                    
      </td>
      <td class="table_col_function">
                     
        <f:link.action action="doubletCheck" controller="Search" arguments="{document : document}" class="btn btn-xs btn-default">{f:translate(key: 'manager.doublet')}</f:link.action>
          
        <f:link.action action="showPreview" arguments="{document : document}" class="btn btn-xs btn-default" target="_blank" title="{f:translate(key: 'manager.tooltip.preview')}" additionalAttributes="{data-toggle: 'tooltip' }">
            <span class="glyphicon glyphicon-eye-open"></span>            
        </f:link.action>                     
                        
        <f:link.action action="duplicate" arguments="{document : document}" class="btn btn-xs btn-default" title="{f:translate(key: 'manager.tooltip.duplicate')}" additionalAttributes="{data-toggle: 'tooltip' }">        
            <span class="glyphicon glyphicon-duplicate"></span>             
        </f:link.action>                      
                    
        
        <f:alias map="{activateTooltip: '{f:translate(key: \'manager.tooltip.activate\')}', inactivateTooltip: '{f:translate(key: \'manager.tooltip.inactivate\')}'}">
        <f:link.action 
            action="{f:if(condition: '{document.activateRemote}', then: 'activateConfirm')}{f:if(condition: '{document.inactivateRemote}', then: 'inactivateConfirm')}" 
            arguments="{document : document}" 
            title="{f:if(condition: '{document.activateRemote}', then: '{activateTooltip}')}{f:if(condition: '{document.inactivateRemote}', then: '{inactivateTooltip}')}"
            class="btn btn-xs btn-default {f:if(condition: '{document.activationChangeAllowed} == 0' then: 'disabled')}"
            additionalAttributes="{data-toggle: 'tooltip' }">             
            <f:if condition="{document.activateRemote}">
                <span class="glyphicon glyphicon-ban-circle"></span>                 
            </f:if>
            <f:if condition="{document.ingestRemote}">
                <span class="glyphicon glyphicon-ok-circle"></span>                  
            </f:if>   
            <f:if condition="{document.inactivateRemote}">
                <span class="glyphicon glyphicon-ok-circle"></span>                  
            </f:if>    
            <f:if condition="{document.restoreRemote}">
                <span class="glyphicon glyphicon-ban-circle"></span>                  
            </f:if>   
            <f:if condition="{document.deleteRemote}">
                <span class="glyphicon glyphicon-ban-circle"></span>                  
            </f:if>   
                                               
        </f:link.action> 
        </f:alias>    
         
        <f:link.action action="discardConfirm" arguments="{document : document}" class="btn btn-xs btn-warning">
            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
            {f:translate(key: 'manager.discard')}
        </f:link.action>
        
        <f:if condition="{document.ingestRemote}">
            <f:link.action 
                action="releaseConfirm" 
                arguments="{document : document, releaseType : 'publish'}" 
                class="btn btn-xs {f:if(condition: '{document.changed}', then: 'btn-success', else: 'btn-success disabled')}">
                <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                {f:translate(key: 'manager.publish')}
            </f:link.action>        
        </f:if>
        
        <f:if condition="{document.updateRemote}">
            <f:link.action 
                action="releaseConfirm" 
                arguments="{document : document, releaseType : 'update'}" 
                class="btn btn-xs {f:if(condition: '{document.changed}', then: 'btn-info', else: 'btn-info disabled')}">
                <span class="glyphicon glyphicon-refresh"></span>
                {f:translate(key: 'manager.update')}
            </f:link.action>   
        </f:if>
                                
        <f:if condition="{document.deleteRemote}">
            <f:link.action 
                action="deleteConfirm" 
                arguments="{document : document}" 
                class="btn btn-xs btn-danger">
                {f:translate(key: 'manager.delete')}
            </f:link.action>                             
        </f:if>              
        
        <f:if condition="{document.restoreRemote}">
            <f:link.action 
              action="restoreConfirm" 
              arguments="{document : document, releaseType : 'restore'}" 
              class="btn btn-xs btn-warning">
              <span class="glyphicon glyphicon-refresh"></span>
              {f:translate(key: 'manager.restore')}restore
            </f:link.action>   
        </f:if>
                                                   
      </td>
    </tr>
  </f:for>
</table>

