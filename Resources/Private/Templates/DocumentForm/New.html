
<f:layout name="Default" />

This template displays a NEW form for the current domain object.

If you modify this template, do not forget to change the overwrite settings
in /Configuration/ExtensionBuilder/settings.yaml:
  Resources:
    Private:
      Templates:
        New.html: keep

Otherwise your changes will be overwritten the next time you save the extension in the extension builder

<f:section name="main">
<h1>Document Form</h1>

<f:flashMessages renderMode="div" />

<f:debug title="Form" maxDepth="20">{documentForm}</f:debug>


<h2>{documentForm.displayName}</h2>
<f:form action="create" name="newDocument" object="{newDocument}" enctype="multipart/form-data">
  <f:form.hidden name="newDocument[type]" value="{documentForm.uid}" />

    <ul class="tx-dpf-tabs">
      <f:for each="{documentForm.pages}" as="formPage" iteration="pageIterator">
        <li><a href="#tab-{pageIterator.cycle}">{formPage.displayName}</a></li>
      </f:for>
      <li><a href="#tab-file-upload">Dateien</a></li>
    </ul>

    <div class="css-panes">

      <f:for each="{documentForm.pages}" as="formPage" iteration="pageIterator">

        <div id="tab-{pageIterator.cycle}" class="fs_page" data-page="{formPage.uid}">

          <f:for each="{formPage.groups}" as="formGroup" iteration="groupIterator">

            <f:for each="{formGroup.items}" as="groupItem" iteration="groupItemIterator">

              <f:render partial="DocumentForm/Group" arguments="{
                        formPageUid:formPage.uid,                       
                        formGroupUid:formGroup.uid,
                        formGroupDisplayName:formGroup.displayName,
                        groupItem:groupItem, 
                        groupIndex:groupItemIterator.index}"/>

              <f:if condition="{groupItemIterator.isLast}">                               
                <input type="submit" value="{formGroup.displayName} hinzufügen"
                       name="add_group" class="add_group"
                       data-group="{formGroup.uid}"
                       data-ajax="{f:uri.action(
                            action:'getGroup',
                            controller:'DocumentForm',
                            pageType:110124,
                            arguments:{
                                pageUid:formPage.uid,
                                groupUid:formGroup.uid                               
                       })}"
                       data-index="{groupItemIterator.index}" />
              </f:if>
             
            </f:for>

          </f:for>

        </div>
      </f:for>

      <div id="tab-file-upload" class="fs_page">
         <f:render partial="DocumentForm/FileGroup" arguments="{groupIndex:0, displayName:'Volltextdokument (PDF-Datei)'}" />
        <input type="submit" value="Weitere Datei hinzufügen"
               name="add_file_group" class="add_file_group"
               data-group="file-upload"
               data-ajax="{f:uri.action(
                            action:'getFileGroup',
                            controller:'DocumentForm',
                            pageType:110124
                           )}"
              data-index="0" />
      </div>

    </div>

  <div class="form-submit">
      <f:form.submit value="Speichern" name="save" id="save" />
      <f:form.submit value="Speichern und fortsezen" name="savecontinue" id="savecontinue" />
      <f:form.submit value="Abbrechen" name="cancel" id="cancel" />
    </div>
</f:form>



</f:section>